1. Dobbiamo necessariamente dividere la logica delle implementazioni in due
controller diversi, questo perchÃ¨:

- l'autenticazione dovrebbe riguardare:
login, logout, registrazione, eliminazione account.

- il profilo invece:
dato che Ã¨ giÃ  presupposto l'utente loggato, dovrebbe occuparsi di quelle
che sono le operazioni legate al profilo, come
aggiornamento dati, visualizzazione dati (nel senso che escono tutti i dati
associati per quel profilo)

--inoltre, Ã¨ importante anche perchÃ¨ dobbiamo cambiare rotta e non possiamo usare
sempre /auth anche per quello che non riguarda l'autenticazione

---------------------------------
Agente che puÃ² cercare in base allo stato delle offerte fatte dall'utente
ğŸ‘‰ Accesso:

solo agenti autenticati (tramite token JWT).

ğŸ‘‰ Risultato:

una lista di offerte relative agli immobili gestiti da quellâ€™agente,
filtrate in base allo stato (o tutte se non si passa alcun parametro).
Per implementare questa funzionalitÃ  abbiamo introdotto unâ€™entitÃ  specifica chiamata Offerta, collegata a:

un inserzione (ManyToOne) â†’ lâ€™inserzione su cui Ã¨ stata fatta la proposta;

un acquirente (ManyToOne) â†’ lâ€™utente che ha inviato lâ€™proposta.

Allâ€™interno della classe Offerta abbiamo aggiunto:

un campo importo per rappresentare la cifra proposta;

un campo stato (di tipo StatoOfferta), che puÃ² essere:

IN_ATTESA

ACCETTATA

RIFIUTATA

e la dataCreazione per tenere traccia del momento in cui lâ€™proposta Ã¨ stata fatta.

ğŸ—‚ï¸ Gestione dei dati

Per gestire i dati delle offerte abbiamo creato:

un repository (OffertaRepository) che consente di filtrare le offerte in base allâ€™agente e allo stato;

un service (OffertaServiceImpl) che:

legge il token JWT per identificare lâ€™agente loggato,

recupera tutte le offerte relative agli immobili di quellâ€™agente,

e le converte in un formato leggibile dal frontend tramite un DTO (OffertaResponse);

infine, un controller (OffertaController) che espone lâ€™endpoint REST /api/offerte.

ğŸŒ Endpoint principale
GET /api/offerte?stato=IN_ATTESA


Questo endpoint:

puÃ² essere chiamato solo da un agente autenticato (tramite token Bearer);

accetta un parametro opzionale stato;

restituisce la lista delle offerte ricevute, filtrate per stato (o tutte, se il parametro non Ã¨ specificato).